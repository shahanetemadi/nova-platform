<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Nova Platform</title>

  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
</head>

<body>

<h2>Nova Platform â€“ FINAL</h2>

<button onclick="connectWallet(<script>
const CONTRACT_ADDRESS = "0xYOUR_CONTRACT_ADDRESS_HERE";

const ABI = [
  {"inputs":[{"internalType":"contract IOrigin","name":"_origin","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},
  {"inputs":[],"name":"UserCount","outputs":[{"internalType":"uint256","name":"count","type":"uint256"}],"stateMutability":"view","type":"function"},
  {"inputs":[],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}
];

let contract;

async function initContract() {
  contract = new ethers.Contract(
    CONTRACT_ADDRESS,
    ABI,
    signer
  );
}

/* Ø¨Ø¹Ø¯ Ø§Ø² Ø§ØªØµØ§Ù„ ÙˆØ§Ù„Øª ØµØ¯Ø§ Ø²Ø¯Ù‡ Ù…ÛŒØ´Ù‡ */
async function connectWallet() {
  try {
    let ethProvider = window.ethereum || window.safepal?.ethereum || window.BinanceChain;
    if (!ethProvider) {
      alert("âŒ ÙÙ‚Ø· Ø¯Ø§Ø®Ù„ SafePal â†’ Discover");
      return;
    }

    provider = new ethers.providers.Web3Provider(ethProvider, "any");
    await provider.send("eth_requestAccounts", []);
    signer = provider.getSigner();
    userAddress = await signer.getAddress();

    document.getElementById("walletStatus").innerText =
      "âœ… Connected: " + userAddress.slice(0,6) + "..." + userAddress.slice(-4);

    await initContract(); // ğŸ‘ˆ Ø§ÛŒÙ† Ø®Ø· Ù…Ù‡Ù…Ù‡

  } catch (e) {
    alert("âŒ Ø§ØªØµØ§Ù„ Ø§Ù†Ø¬Ø§Ù… Ù†Ø´Ø¯");
  }
}

/* ØªØ³Øª Ø²Ù†Ø¯Ù‡ */
async function getUserCount() {
  const count = await contract.UserCount();
  alert("ğŸ‘¥ Users: " + count.toString());
}
</script>)">Connect Wallet</button>
<div id="walletStatus" style="margin-top:10px;color:green;"></div>

<script>
let provider, signer, userAddress;

async function connectWallet() {
  try {
    let ethProvider = null;

    if (window.ethereum) {
      ethProvider = window.ethereum;
    } else if (window.safepal && window.safepal.ethereum) {
      ethProvider = window.safepal.ethereum;
    } else if (window.BinanceChain) {
      ethProvider = window.BinanceChain;
    } else {
      alert("âŒ ÙÙ‚Ø· Ø§Ø² Ø¯Ø§Ø®Ù„ SafePal â†’ Discover Ø¨Ø§Ø² Ú©Ù†");
      return;
    }

    provider = new ethers.providers.Web3Provider(ethProvider, "any");
    await provider.send("eth_requestAccounts", []);

    signer = provider.getSigner();
    userAddress = await signer.getAddress();

    document.getElementById("walletStatus").innerText =
      "âœ… Connected: " + userAddress.slice(0,6) + "..." + userAddress.slice(-4);

  } catch (err) {
    console.error(err);
    alert("âŒ Ø§ØªØµØ§Ù„ Ú©Ù†Ø³Ù„ Ø´Ø¯");
  }
}
</script>

</body>
</html>
