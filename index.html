<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>NOVA | Galactic Platform</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Font -->
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@300;500&display=swap" rel="stylesheet">

<script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>

<style>
html,body{
  margin:0;
  padding:0;
  background:#05010d;
  color:#fff;
  font-family:'Orbitron',sans-serif;
  overflow-x:hidden;
}
canvas{
  position:fixed;
  top:0;left:0;
  z-index:-1;
}
section{
  min-height:100vh;
  padding:80px 20px;
  text-align:center;
}
h1{font-size:42px;margin-bottom:10px;}
button{
  background:linear-gradient(135deg,#6e00ff,#00c6ff);
  border:none;
  color:#fff;
  padding:14px 26px;
  border-radius:30px;
  font-size:14px;
  cursor:pointer;
  margin:10px;
}
button:hover{opacity:.85}
.card{
  max-width:420px;
  margin:20px auto;
  background:rgba(255,255,255,0.06);
  border-radius:20px;
  padding:25px;
  backdrop-filter:blur(10px);
}
input{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:none;
  margin:10px 0;
}
small{opacity:.7}
</style>
</head>

<body>

<canvas id="space"></canvas>

<section>
  <h1>NOVA</h1>
  <p>Galactic Decentralized Platform</p>
  <button onclick="connectWallet()">Connect Wallet</button>
  <p id="wallet"></p>
</section>

<section>
  <div class="card">
    <h3>Register (2 USDT)</h3>
    <input id="username" placeholder="username">
    <button onclick="register()">Register</button>
  </div>
</section>

<section>
  <div class="card">
    <h3>Purchase (10 USDT)</h3>
    <input id="ref1" placeholder="referrer 1">
    <input id="ref2" placeholder="referrer 2">
    <button onclick="purchase()">Purchase</button>
  </div>
</section>

<script>
// ========= SPACE BACKGROUND =========
const canvas=document.getElementById('space');
const ctx=canvas.getContext('2d');
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;
let stars=[...Array(200)].map(()=>({
 x:Math.random()*canvas.width,
 y:Math.random()*canvas.height,
 r:Math.random()*1.5
}));
function draw(){
 ctx.clearRect(0,0,canvas.width,canvas.height);
 ctx.fillStyle='white';
 stars.forEach(s=>{
  ctx.beginPath();
  ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
  ctx.fill();
  s.y+=0.2;
  if(s.y>canvas.height)s.y=0;
 });
 requestAnimationFrame(draw);
}
draw();

// ========= WEB3 =========
let web3, account;
const CONTRACT_ADDRESS = "0x3810099D2D61e0399d07a3bad4e796A3De82ff27";
const USDT_ADDRESS = "0x55d398326f99059fF775485246999027B3197955";

const ABI = [
 {"inputs":[{"internalType":"string","name":"username","type":"string"}],"name":"Register","outputs":[],"stateMutability":"nonpayable","type":"function"},
 {"inputs":[{"internalType":"string","name":"refer1","type":"string"},{"internalType":"string","name":"refer2","type":"string"}],"name":"Purchase","outputs":[],"stateMutability":"nonpayable","type":"function"}
];

const ERC20_ABI = [
 {"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"type":"function"}
];

async function connectWallet(){
 if(window.ethereum){
   web3=new Web3(window.ethereum);
   const accs=await ethereum.request({method:'eth_requestAccounts'});
   account=accs[0];
   document.getElementById('wallet').innerText=account;
 }else{
   alert("Wallet not found");
 }
}

async function approveUSDT(amount){
 const usdt=new web3.eth.Contract(ERC20_ABI,USDT_ADDRESS);
 const value=web3.utils.toWei(amount,'ether');
 return usdt.methods.approve(CONTRACT_ADDRESS,value).send({from:account});
}

async function register(){
 const username=document.getElementById('username').value;
 if(!username) return alert("Username required");
 await approveUSDT("2");
 const c=new web3.eth.Contract(ABI,CONTRACT_ADDRESS);
 await c.methods.Register(username).send({from:account});
 alert("Registered successfully");
}

async function purchase(){
 const r1=document.getElementById('ref1').value;
 const r2=document.getElementById('ref2').value;
 await approveUSDT("10");
 const c=new web3.eth.Contract(ABI,CONTRACT_ADDRESS);
 await c.methods.Purchase(r1,r2).send({from:account});
 alert("Purchase successful");
}
</script>

</body>
</html>
